<?//$Loader->Load_Class("System/Env");   class C_Builder_Compiler_CPP_VC_Detect  {    Var $List=[      ['VC\bin\vcvars32.bat'                                ,'x86'   ,'x86'   ,],    //['VC\bin\vcvarsphoneall.bat'                          ,'?'     ,'?'     ,],    //['VC\bin\vcvarsphonex86.bat'                          ,'?'     ,'?'     ,],      ['VC\bin\amd64\vcvars64.bat'                          ,'amd64' ,'amd64' ,],      ['VC\bin\amd64_arm\vcvarsamd64_arm.bat'               ,'amd64' ,'arm'   ,],      ['VC\bin\amd64_x86\vcvarsamd64_x86.bat'               ,'amd64' ,'x86'   ,],      ['VC\bin\x86_amd64\vcvarsx86_amd64.bat'               ,'x86'   ,'amd64' ,],    //['VC\bin\x86_arm\vcvarsphonex86_arm.bat'              ,'x86'   ,'arm'   ,],      ['VC\bin\x86_arm\vcvarsx86_arm.bat'                   ,'x86'   ,'arm'   ,],    //['VC\ClangC2\bin\amd64\clang.exe'                     ,'amd64' ,'?'     ,],    //['VC\ClangC2\bin\x86\clang.exe'                       ,'x86'   ,'?'     ,],      ['VC\Auxiliary\Build\vcvars32.bat'                    ,'x86'   ,'x86'   ,],      ['VC\Auxiliary\Build\vcvars64.bat'                    ,'amd64' ,'amd64' ,],    //['VC\Auxiliary\Build\vcvarsall.bat'                   ,''      ,'?'     ,],      ['VC\Auxiliary\Build\vcvarsamd64_arm.bat'             ,'amd64' ,'arm'   ,],      ['VC\Auxiliary\Build\vcvarsamd64_x86.bat'             ,'amd64' ,'x86'   ,],      ['VC\Auxiliary\Build\vcvarsx86_amd64.bat'             ,'x86'   ,'amd64' ,],      ['VC\Auxiliary\Build\vcvarsx86_arm.bat'               ,'x86'   ,'arm'   ,],    //['VC\Tools\ClangC2\14.10.25903\bin\HostX64\clang.exe' ,'amd64' ,'*'     ,],    //['VC\Tools\ClangC2\14.10.25903\bin\HostX86\clang.exe' ,'x86'   ,'*'     ,],    //['VC\Tools\MSVC\14.12.25827\bin\Hostx64\arm\cl.exe'   ,'amd64' ,'arm'   ,],    //['VC\Tools\MSVC\14.12.25827\bin\Hostx64\x64\cl.exe'   ,'amd64' ,'amd64' ,],    //['VC\Tools\MSVC\14.12.25827\bin\Hostx64\x86\cl.exe'   ,'amd64' ,'x86'   ,],    //['VC\Tools\MSVC\14.12.25827\bin\Hostx86\arm\cl.exe'   ,'x86'   ,'arm'   ,],    //['VC\Tools\MSVC\14.12.25827\bin\Hostx86\x64\cl.exe'   ,'x86'   ,'amd64' ,],    //['VC\Tools\MSVC\14.12.25827\bin\Hostx86\x86\cl.exe'   ,'x86'   ,'x86'   ,],    //['Common7/Tools/vsdevcmd/ext/vcvars.bat'              ,'?'     ,'?'     ,],    //['Common7/Tools/vsdevcmd/ext/vcvars/vcvars140.bat'    ,'?'     ,'?'     ,],    ];      function Detect($PathInfo)    {      $Path=$PathInfo['Path'];            MkDir('test');      MkDir('test\obj');      MkDir('test\bin');    //MkDir('test\env');      MkDir('test\info');            $PathBat='';      $PathObj='obj/';      $PathExe='bin/';          //$FileSrc='../test.c';      $FileSrc=$this->Loader->_Find_Lib('/Builder/Compiler/CPP/VC/Test.c');            $CurrEnv=$this->Create_Object("System/Env");      $CurrEnv->LoadCurrent();      $ItemEnv=$this->Create_Object("System/Env");      $SaveDir=getcwd();      chdir('test');      foreach($List as $k=>$Item)      {        $File=$Path.$Item[0];        $k=str_pad($k, 3, '0', STR_PAD_LEFT);        if(File_Exists($File))        {          $FileBat=$PathBat.$k.'.bat' ;          $FileObj=$PathObj.$k.'.o'   ;          $FileExe=$PathExe.$k.'.exe' ;                  //echo '>',$File,"\n";          $Res=[            "@echo off\r\n",            'call "',$File,'"',"\r\n",            'SET >',$k,'.txt',"\r\n",          //'cl 2>info\\',$k,'.info',"\r\n",          //'cl /nologo -c ',$FileSrc,' /Fo: ',$FileObj,"\r\n",            'cl /nologo -c ',$FileSrc,' /Fo',$FileObj,"\r\n",            'link /nologo ',$FileObj,' /OUT:',$FileExe,"\r\n",          ];          FS_File_Put_Contents($FileBat, implode($Res));          exec($FileBat);                    // Begin Env          $ItemEnv->Clear();          $ItemEnv->LoadFile($k.'.txt');          unlink($k.'.txt');          $CurrEnv->LoadCurrent();          $ItemEnv->Minus($CurrEnv);          // End Env             $Obj_Bin=FS_File_Get_Contents($FileObj);          $PreDef=[];          preg_match_all('/>>>(.+):(.+);<<</', $Obj_Bin, $Matches, PREG_SET_ORDER);          foreach($Matches as $Item)            if($Item[1]!==$Item[2])              $PreDef[$Item[1]]=$Item[2];                    $Info=[            'From'=>$PathInfo,            'PreDef'=>$PreDef,            'Env'=>$ItemEnv->Map,          ];          $OutEnv="<?\n  return\n".Var_Export($Info, true).";\n?>";          FS_File_Put_Contents('info/'.$k.'.php', $OutEnv);        }      }      ChDir($SaveDir);    };  };?>