<?  $Loader->Parent_Class('/Builder/Asset/Cpp/MakeBase');  class C_Builder_Asset_Cpp_Compile extends C_Builder_Asset_Cpp_MakeBase  {    Static Function Make($Outer, $Compiler, $Param)    {      Parent::Make($Outer, $Compiler, $Param);            Static::Compile($Outer, $Compiler, $Param);    }    Static Function Compile($Outer, $Compiler, $Param)    {      $OutPath=$Param['OutPath'];     #echo 'OutPath: ',$OutPath ,"\n";          $PathObj=$OutPath.'Obj';      $PathObjType='Cpp/ObjPath' ;      $PathObjAsset=$Outer->CreateAsset($PathObjType, $PathObj);      $TypeCppSrc     = 'Cpp/Src'     ; //$Outer->MakeNS_ByParam('Cpp/Src'     ,$Param, 'NS_Src'     );      $TypeCppDefine  = 'Cpp/Define'  ; //$Outer->MakeNS_ByParam('Cpp/Define'  ,$Param, 'NS_Define'  );      $TypeCppInclude = 'Cpp/Include' ; //$Outer->MakeNS_ByParam('Cpp/Include' ,$Param, 'NS_Include' );      $TypeCppObj     = 'Cpp/Obj'     ; //$Outer->MakeNS_ByParam('Cpp/Obj'     ,$Param, 'NS_Obj'     );      $TypeCppUsing   = 'Cpp/Using'   ; //$Outer->MakeNS_ByParam('Cpp/Using'   ,$Param, 'NS_Using'   );            $Sources=$Outer->RemoveAssets($TypeCppSrc);      $EnumCache=$Outer->GetModuleInstance()->EnumCache;      $Items=[];      ForEach($Sources As $SrcAsset)      {        if($SrcAsset->Parent)        {          $Dir=$SrcAsset->Parent->GetFullPath();          $Name=$SrcAsset->GetLocalPathNick();        }        else        {          $Dir=$SrcAsset->GetDirFullPath();          $Name=$SrcAsset->GetFileNick();        }        $Num=$EnumCache->AllocNum($Dir, 'Obj', ['Pad'=>1]);        $ObjNick=$Num.'/'.$Name;        $ObjFile=$Compiler->GetObjFile($ObjNick);        $ObjAsset=$Outer->CreateAsset($TypeCppObj, ['Path'=>$ObjFile, '>Create'=>1]);       #echo '  ObjNick: ',$ObjNick,"\n";       #echo '  ObjFile: ',$ObjFile,"\n";       #echo '  ObjAsset: ',$ObjAsset->GetFullPath(),"\n";        $Exec=$ObjAsset->CreateExec();        $ObjAsset->AddTask($Exec);                $Items[]=[          'SrcAsset' =>$SrcAsset ,          'ObjAsset' =>$ObjAsset ,          'Exec'     =>$Exec     ,          'OutPath'  =>[$OutPath,$ObjNick],        ];      }      $Compiler->Compile([        'Defines'   =>$Outer->GetAssets  ($TypeCppDefine  ),        'Includes'  =>$Outer->GetAssetsR ($TypeCppInclude ),        'Using'     =>$Outer->GetAssetsR ($TypeCppUsing   ),        'Items'     =>$Items,        'Outer'     =>$Outer,        'Compiler'  =>$Compiler,        'EnumCache' =>$EnumCache,        'OutPath'   =>$OutPath,      ]);      $PathObjAsset->Remove();    }  };?>